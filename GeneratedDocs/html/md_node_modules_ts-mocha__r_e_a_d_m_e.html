<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EOSDAC: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EOSDAC
   </div>
   <div id="projectbrief">Open source decentralised DAC platform for EOSIO blockchains</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_node_modules_ts-mocha__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://www.npmjs.com/package/ts-mocha"><img src="https://img.shields.io/npm/v/ts-mocha.svg" alt="Latest Stable Version" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/ts-mocha"><img src="https://img.shields.io/npm/dt/ts-mocha.svg" alt="NPM Downloads" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/ts-mocha"><img src="https://img.shields.io/npm/dm/ts-mocha.svg" alt="NPM Downloads" style="pointer-events: none;" class="inline"/></a></p>
<p><a href="https://app.codeship.com/projects/328034"><img src="https://app.codeship.com/projects/cb8cc460-1719-0137-28fd-3a09a0997096/status?branch=master" alt="Codeship Status for piotrwitek/ts-mocha" class="inline"/></a> <a href="https://greenkeeper.io/"><img src="https://badges.greenkeeper.io/piotrwitek/ts-mocha.svg" alt="Greenkeeper badge" style="pointer-events: none;" class="inline"/></a> <a href="https://david-dm.org/piotrwitek/ts-mocha"><img src="https://img.shields.io/david/piotrwitek/ts-mocha.svg" alt="Dependency Status" style="pointer-events: none;" class="inline"/></a> <a href="https://david-dm.org/piotrwitek/ts-mocha#info=devDependencies"><img src="https://img.shields.io/david/peer/piotrwitek/ts-mocha.svg" alt="peerDependency Status" style="pointer-events: none;" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md4209"></a>
TS-Mocha</h1>
<blockquote class="doxtable">
<p>Mocha thin wrapper that allows running TypeScript tests with TypeScript runtime (ts-node) to get rid of compilation complexity. All Mocha features are available without any limitation. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md4210"></a>
Why?</h2>
<p>To setup Mocha with TypeScript you have to figure out how to integrate them to work together, it's not an easy task and require some advanced knowledge. This package handles for you this complexity and let you use ts-mocha just as regular mocha that will handle TypeScript <code>.ts</code> and <code>.tsx</code> files. Also added some useful options, you can find them below.</p>
<h2><a class="anchor" id="autotoc_md4211"></a>
How?</h2>
<p>TS-Mocha has one only dependency - ts-node, which is used as a TypeScript runtime to execute tests that can import and run imported TypeScript source files as well. It is as a thin wrapper that run local mocha package and set up ts-node environment to handle <code>.ts</code> and <code>.tsx</code> files. To speed up TypeScript tests execution type-checking is disabled, using only transpile module.</p>
<blockquote class="doxtable">
<p><b>NOTE</b>: This package does not include Mocha - I have set Mocha as peer dependency on purpose, so I don't lock consumer to a specific Mocha version but most importantly, I don't have to update this package when Mocha is updated, and all the new features will be available automatically from your local Mocha package. Also integration with your existing Mocha setup is non-invasive. </p>
</blockquote>
<blockquote class="doxtable">
<p><b>PRO TIP</b>: To make your developer experience better I recommend to run type-checking in a separate process by starting TSC compiler (preferably in watch mode) in you terminal with &ndash;noEmit and &ndash;project flags. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md4212"></a>
Installation</h2>
<div class="fragment"><div class="line"># remember to install mocha if you don&#39;t have it already (npm i -D mocha)</div>
<div class="line"> </div>
<div class="line">npm i -D ts-mocha</div>
<div class="line"> </div>
<div class="line"># install recent Mocha and Expect @types packages for best DX</div>
<div class="line">npm i -D @types/mocha @types/expect</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4213"></a>
Usage</h2>
<h3><a class="anchor" id="autotoc_md4214"></a>
- CLI Usage:</h3>
<p>CLI options consist of all the options of regular Mocha plus extra options below:</p>
<p><code>-p, --project &lt;value&gt;</code> - relative or absolute path to a <code>tsconfig.json</code> file (equivalent of <code>tsc -p &lt;value&gt;</code>) [default: "./tsconfig.json"]</p>
<p>Example: </p><div class="fragment"><div class="line">ts-mocha -p src/tsconfig.json src/**/*.spec.ts</div>
</div><!-- fragment --><p><code>--paths</code> - feature toggle flag to enable <a href="https://www.npmjs.com/package/tsconfig-paths"><code>tsconfig-paths</code></a> integration [default: false] </p><blockquote class="doxtable">
<p><code>tsconfig-paths</code> is an optional dependency, make sure to install it locally in your project </p>
</blockquote>
<p>When using <a href="https://www.typescriptlang.org/docs/handbook/module-resolution.html#path-mapping">path mapping</a> via the <code>paths</code> compiler option in <code>tsconfig.json</code> this library utilizes the <a href="https://www.npmjs.com/package/tsconfig-paths"><code>tsconfig-paths</code></a> package, allowing for automatic resolution of aliased modules locations during test execution.</p>
<p>Check our test suite for a reference implementation: <a href="./test/paths/tsconfig.json">Link</a></p>
<p><b>Example:</b> </p><div class="fragment"><div class="line">ts-mocha --paths -p src/ src/**/*.spec.ts</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md4215"></a>
- Programmatic usage:</h3>
<p>In code you can use ts-mocha by adding a single require at the beginning of your script:</p>
<div class="fragment"><div class="line">// set env variable to the `tsconfig.json` path before loading mocha (default: &#39;./tsconfig.json&#39;)</div>
<div class="line">process.env.TS_NODE_PROJECT = &#39;./src/tsconfig.json&#39;</div>
<div class="line"> </div>
<div class="line">// Optional: set env variable to enable `tsconfig-paths` integration</div>
<div class="line">process.env.TS_CONFIG_PATHS = true;</div>
<div class="line"> </div>
<div class="line">// register mocha wrapper</div>
<div class="line">require(&#39;ts-mocha&#39;);</div>
</div><!-- fragment --><p>For example:</p>
<div class="fragment"><div class="line">process.env.TS_NODE_PROJECT = &#39;./src/tsconfig.json&#39;;</div>
<div class="line">require(&#39;ts-mocha&#39;);</div>
<div class="line">const Mocha = require(&#39;mocha&#39;);</div>
<div class="line"> </div>
<div class="line">const mocha = new Mocha();</div>
<div class="line">mocha.addFile(`./src/file.spec.ts`);</div>
<div class="line">mocha.run((failures) =&gt; {</div>
<div class="line">  process.on(&#39;exit&#39;, () =&gt; {</div>
<div class="line">    process.exit(failures); // exit with non-zero status if there were failures</div>
<div class="line">  });</div>
<div class="line">});</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
