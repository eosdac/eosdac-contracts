<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EOSDAC: Referendum Contract</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EOSDAC
   </div>
   <div id="projectbrief">Open source decentralised DAC platform for EOSIO blockchains</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_dac_contracts_referendum__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Referendum Contract </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This contract allows members of the DAC to propose a referendum for voting on by the token holders.</p>
<h1><a class="anchor" id="autotoc_md281"></a>
Types</h1>
<p>There are 3 types of referendum:</p>
<ul>
<li><b>Binding</b> An action must be submitted with the proposal and this will be executed by the contract if the quorum and threshold are met.</li>
<li><b>Semi-Binding</b> Similar to a binding referendum, except the action will be proposed as a custodian to approve and execute.</li>
<li><b>Opinion</b> This type of referendum does not need to include an action to execute, it is simply a signal to the Custodians about the opinion of the token holders.</li>
</ul>
<p>There are 2 types of counting method</p>
<ul>
<li><b>Token</b> The staked token balance will be used</li>
<li><b>Account</b> There will be 1 vote per account. Please note that this counting method can be subjected to Sybil attack.</li>
</ul>
<h1><a class="anchor" id="autotoc_md282"></a>
Configuration</h1>
<p>The contract takes a number of configuration variables, most are sent as maps with the key being the type of referendum, this means we can have different fees and thresholds for different types of referendum.</p>
<ul>
<li><b>fee</b> The amount to charge for submitting a proposal, must be an extended asset and can be 0.</li>
<li><b>pass</b> The pass percentage as an integer with 2 decimal places. eg. 1000 = 10%</li>
<li><b>quorum_token</b> The quorum of token votes which must be met if the count type is token</li>
<li><b>quorum_account</b> The quorum of account votes which must be met if the count type is account</li>
<li><b>allow_per_account_voting</b> Set to 1 to allow account-based counting for each referendum type</li>
</ul>
<h1><a class="anchor" id="autotoc_md283"></a>
Voting</h1>
<p>Members will be allowed to vote on up to 20 open proposals at any one time.</p>
<p>Voting for each proposal can be either yes, no or abstain. Members will also be allowed to remove a vote entirely.</p>
<p>All votes count towards the quorum, if this is met then the percentage of yes votes is calculated and compared to the required limit.</p>
<p>Once the proposal has met the pass threshold the status will be changed and the proposal can be executed by anyone.</p>
<p>If a quorum is reached, but not the pass threshold then the status will be set to alert the custodians to it.</p>
<h1><a class="anchor" id="autotoc_md284"></a>
Fees</h1>
<p>A fee is configurable for each type of referendum, this must be sent to the referendum contract before proposing the referendum. The fee can be in any currency, but the contract can only hold a single depoosit currency at a time while waiting for the proposal. In most cases the payment and the proposal will be sent together so this will not matter.</p>
<h1><a class="anchor" id="autotoc_md285"></a>
Permissions</h1>
<p>When executing actions directly, the referendum contract must must satisfy those permissions by itself.</p>
<p>When submitting a multisig for approval to the custodians, the contract will use the permission <code>[authority]@admin</code>. This is a permission that must be added under <code>@one</code> and be linked to <code>[dacmsig]<a class="el" href="dacmultisigs_8hpp.html#ab5a03f1163f98a0e6e426bcde93a9d52">proposede</a></code>.</p>
<p><code>cleos set account permission --add-code [custodian] admin [this contract] one</code></p>
<p>The authority account have the premission <code>@referendum</code> which is satisfied by this contract and is linked to <code>eosio.msig::propose</code>.</p>
<p><code>cleos set account permission --add-code [authority] referendum [this account] active</code></p>
<p><code>cleos set action permission [authority] eosio.msig propose referendum</code></p>
<p>For all other actions which could be proposed in a semi-binding constitution, you must make sure that they can be satisfied by the contract <code>@eosio.code</code> permission.</p>
<p>The <code>@active</code> permission of this contract should be satisfyable by <code>@eosio.code</code></p>
<p><code>cleos set account permission --add-code [this account] active [this account] owner</code> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
