<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EOSDAC: tsconfig-paths</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EOSDAC
   </div>
   <div id="projectbrief">Open source decentralised DAC platform for EOSIO blockchains</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_node_modules_tsconfig-paths__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">tsconfig-paths </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://www.npmjs.com/package/tsconfig-paths"><img src="https://img.shields.io/npm/v/tsconfig-paths.svg?style=flat" alt="npm version" style="pointer-events: none;" class="inline"/></a> <a href="https://travis-ci.com/dividab/tsconfig-paths"><img src="https://travis-ci.com/dividab/tsconfig-paths.svg?branch=master&amp;style=flat" alt="travis build" style="pointer-events: none;" class="inline"/></a> <a href="https://codecov.io/gh/dividab/tsconfig-paths"><img src="https://codecov.io/gh/dividab/tsconfig-paths/branch/master/graph/badge.svg" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a> <a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/github/license/dividab/tsconfig-paths.svg?style=flat" alt="MIT license" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/prettier/prettier"><img src="https://img.shields.io/badge/code_style-prettier-ff69b4.svg" alt="code style: prettier" style="pointer-events: none;" class="inline"/></a></p>
<p>Use this to load modules whose location is specified in the <code>paths</code> section of <code>tsconfig.json</code>. Both loading at run-time and via API are supported.</p>
<p>Typescript by default mimics the Node.js runtime resolution strategy of modules. But it also allows the use of <a href="https://www.typescriptlang.org/docs/handbook/module-resolution.html">path mapping</a> which allows arbitrary module paths (that doesn't start with "/" or ".") to be specified and mapped to physical paths in the filesystem. The typescript compiler can resolve these paths from <code>tsconfig</code> so it will compile OK. But if you then try to execute the compiled files with node (or ts-node), it will only look in the <code>node_modules</code> folders all the way up to the root of the filesystem and thus will not find the modules specified by <code>paths</code> in <code>tsconfig</code>.</p>
<p>If you require this package's <code>tsconfig-paths/register</code> module it will read the <code>paths</code> from <code>tsconfig.json</code> and convert node's module loading calls into to physcial file paths that node can load.</p>
<h1><a class="anchor" id="autotoc_md4333"></a>
How to install</h1>
<div class="fragment"><div class="line">yarn add --dev tsconfig-paths</div>
</div><!-- fragment --><p>or</p>
<div class="fragment"><div class="line">npm install --save-dev tsconfig-paths</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md4334"></a>
How to use</h1>
<h2><a class="anchor" id="autotoc_md4335"></a>
With node</h2>
<p><code>node -r tsconfig-paths/register main.js</code></p>
<h2><a class="anchor" id="autotoc_md4336"></a>
With ts-node</h2>
<p><code>ts-node -r tsconfig-paths/register main.ts</code></p>
<p>If <code>process.env.TS_NODE_PROJECT</code> is set it will be used to resolved tsconfig.json</p>
<h2><a class="anchor" id="autotoc_md4337"></a>
With webpack</h2>
<p>For webpack please use the <a href="https://github.com/dividab/tsconfig-paths-webpack-plugin">tsconfig-paths-webpack-plugin</a>.</p>
<h2><a class="anchor" id="autotoc_md4338"></a>
With mocha and ts-node</h2>
<p>As of Mocha &gt;= 4.0.0 the <code>--compiler</code> was <a href="https://github.com/mochajs/mocha/wiki/compilers-deprecation">deprecated</a>. Instead <code>--require</code> should be used. You also have to specify a glob that includes <code>.ts</code> files because mocha looks after files with <code>.js</code> extension by default.</p>
<div class="fragment"><div class="line">mocha -r ts-node/register -r tsconfig-paths/register &quot;test/**/*.ts&quot;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4339"></a>
With other commands</h2>
<p>As long as the command has something similar to a <code>--require</code> option that can load a module before it starts, tsconfig-paths should be able to work with it.</p>
<h1><a class="anchor" id="autotoc_md4340"></a>
Bootstraping with explicit params</h1>
<p>If you want more granular control over tsconfig-paths you can bootstrap it. This can be useful if you for instance have compiled with <code>tsc</code> to another directory where <code>tsconfig.json</code> doesn't exists.</p>
<div class="fragment"><div class="line">const tsConfig = require(&quot;./tsconfig.json&quot;);</div>
<div class="line">const tsConfigPaths = require(&quot;tsconfig-paths&quot;);</div>
<div class="line"> </div>
<div class="line">const baseUrl = &quot;./&quot;; // Either absolute or relative path. If relative it&#39;s resolved to current working directory.</div>
<div class="line">const cleanup = tsConfigPaths.register({</div>
<div class="line">  baseUrl,</div>
<div class="line">  paths: tsConfig.compilerOptions.paths</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// When path registration is no longer needed</div>
<div class="line">cleanup();</div>
</div><!-- fragment --><p>Then run with:</p>
<p><code>node -r ./tsconfig-paths-bootstrap.js main.js</code></p>
<h1><a class="anchor" id="autotoc_md4341"></a>
Configuration Options</h1>
<p>You can set options by passing them before the script path, via programmatic usage or via environment variables.</p>
<div class="fragment"><div class="line">ts-node --project customLocation/tsconfig.json -r tsconfig-paths/register &quot;test/**/*.ts&quot;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4342"></a>
CLI and Programmatic Options</h2>
<p><em>Environment variable denoted in parentheses.</em></p>
<ul>
<li><code>-P, --project [path]</code> Path to TypeScript JSON project file (<code>TS_NODE_PROJECT</code>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4343"></a>
Config loading process</h1>
<ol type="1">
<li>Use explicit params passed to register</li>
<li>Use <code>process.env.TS_NODE_PROJECT</code> to resolve tsConfig.json and the specified baseUrl and paths.</li>
<li>Resolves tsconfig.json from current working directory and the specified baseUrl and paths.</li>
</ol>
<h1><a class="anchor" id="autotoc_md4344"></a>
Programmatic use</h1>
<p>The public API consists of these functions:</p>
<ul>
<li><a href="#register">register</a></li>
<li><a href="#loadConfig">loadConfig</a></li>
<li><a href="#createMatchPath">createMatchPath</a> / <a href="#createMatchPathAsync">createMatchPathAsync</a></li>
<li><a href="#matchFromAbsolutePaths">matchFromAbsolutePaths</a> / <a href="#matchFromAbsolutePathsAsync">matchFromAbsolutePathsAsync</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md4345"></a>
register</h2>
<div class="fragment"><div class="line">export interface ExplicitParams {</div>
<div class="line">  baseUrl: string;</div>
<div class="line">  paths: { [key: string]: Array&lt;string&gt; };</div>
<div class="line">  mainFields?: Array&lt;string&gt;;</div>
<div class="line">  addMatchAll?: boolean;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">/**</div>
<div class="line"> * Installs a custom module load function that can adhere to paths in tsconfig.</div>
<div class="line"> */</div>
<div class="line">export function register(explicitParams: ExplicitParams): () =&gt; void;</div>
</div><!-- fragment --><p>This function will patch the node's module loading so it will look for modules in paths specified by tsconfig.json. A function is returned for you to reinstate Node's original module loading.</p>
<h2><a class="anchor" id="autotoc_md4346"></a>
loadConfig</h2>
<div class="fragment"><div class="line">export function loadConfig(cwd: string = process.cwd()): ConfigLoaderResult;</div>
<div class="line"> </div>
<div class="line">export type ConfigLoaderResult =</div>
<div class="line">  | ConfigLoaderSuccessResult</div>
<div class="line">  | ConfigLoaderFailResult;</div>
<div class="line"> </div>
<div class="line">export interface ConfigLoaderSuccessResult {</div>
<div class="line">  resultType: &quot;success&quot;;</div>
<div class="line">  absoluteBaseUrl: string;</div>
<div class="line">  paths: { [key: string]: Array&lt;string&gt; };</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">export interface ConfigLoaderFailResult {</div>
<div class="line">  resultType: &quot;failed&quot;;</div>
<div class="line">  message: string;</div>
<div class="line">}</div>
</div><!-- fragment --><p>This function loads the tsconfig.json. It will start searching from the specified <code>cwd</code> directory. Passing the tsconfig.json file directly instead of a directory also works.</p>
<h2><a class="anchor" id="autotoc_md4347"></a>
createMatchPath</h2>
<div class="fragment"><div class="line">/**</div>
<div class="line"> * Function that can match a path</div>
<div class="line"> */</div>
<div class="line">export interface MatchPath {</div>
<div class="line">  (</div>
<div class="line">    requestedModule: string,</div>
<div class="line">    readJson?: Filesystem.ReadJsonSync,</div>
<div class="line">    fileExists?: (name: string) =&gt; boolean,</div>
<div class="line">    extensions?: ReadonlyArray&lt;string&gt;</div>
<div class="line">  ): string | undefined;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">/**</div>
<div class="line"> * Creates a function that can resolve paths according to tsconfig paths property.</div>
<div class="line"> * @param absoluteBaseUrl Absolute version of baseUrl as specified in tsconfig.</div>
<div class="line"> * @param paths The paths as specified in tsconfig.</div>
<div class="line"> * @param mainFields A list of package.json field names to try when resolving module files.</div>
<div class="line"> * @param addMatchAll Add a match-all &quot;*&quot; rule if none is present</div>
<div class="line"> * @returns a function that can resolve paths.</div>
<div class="line"> */</div>
<div class="line">export function createMatchPath(</div>
<div class="line">  absoluteBaseUrl: string,</div>
<div class="line">  paths: { [key: string]: Array&lt;string&gt; },</div>
<div class="line">  mainFields: string[] = [&quot;main&quot;],</div>
<div class="line">  addMatchAll: boolean = true</div>
<div class="line">): MatchPath {</div>
</div><!-- fragment --><p>The <code>createMatchPath</code> function will create a function that can match paths. It accepts <code>baseUrl</code> and <code>paths</code> directly as they are specified in tsconfig and will handle resolving paths to absolute form. The created function has the signare specified by the type <code>MatchPath</code> above.</p>
<h2><a class="anchor" id="autotoc_md4348"></a>
matchFromAbsolutePaths</h2>
<div class="fragment"><div class="line">/**</div>
<div class="line"> * Finds a path from tsconfig that matches a module load request.</div>
<div class="line"> * @param absolutePathMappings The paths to try as specified in tsconfig but resolved to absolute form.</div>
<div class="line"> * @param requestedModule The required module name.</div>
<div class="line"> * @param readJson Function that can read json from a path (useful for testing).</div>
<div class="line"> * @param fileExists Function that checks for existance of a file at a path (useful for testing).</div>
<div class="line"> * @param extensions File extensions to probe for (useful for testing).</div>
<div class="line"> * @param mainFields A list of package.json field names to try when resolving module files.</div>
<div class="line"> * @returns the found path, or undefined if no path was found.</div>
<div class="line"> */</div>
<div class="line">export function matchFromAbsolutePaths(</div>
<div class="line">  absolutePathMappings: ReadonlyArray&lt;MappingEntry.MappingEntry&gt;,</div>
<div class="line">  requestedModule: string,</div>
<div class="line">  readJson: Filesystem.ReadJsonSync = Filesystem.readJsonFromDiskSync,</div>
<div class="line">  fileExists: Filesystem.FileExistsSync = Filesystem.fileExistsSync,</div>
<div class="line">  extensions: Array&lt;string&gt; = Object.keys(require.extensions),</div>
<div class="line">  mainFields: string[] = [&quot;main&quot;]</div>
<div class="line">): string | undefined {</div>
</div><!-- fragment --><p>This function is lower level and requries that the paths as already been resolved to absolute form and sorted in correct order into an array.</p>
<h2><a class="anchor" id="autotoc_md4349"></a>
createMatchPathAsync</h2>
<p>This is the async version of <code>createMatchPath</code>. It has the same signature but with a callback parameter for the result.</p>
<h2><a class="anchor" id="autotoc_md4350"></a>
matchFromAbsolutePathsAsync</h2>
<p>This is the async version of <code>matchFromAbsolutePaths</code>. It has the same signature but with a callback parameter for the result.</p>
<h1><a class="anchor" id="autotoc_md4351"></a>
How to publish</h1>
<div class="fragment"><div class="line">yarn version --patch</div>
<div class="line">yarn version --minor</div>
<div class="line">yarn version --major</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
