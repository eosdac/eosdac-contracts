<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EOSDAC: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EOSDAC
   </div>
   <div id="projectbrief">Open source decentralised DAC platform for EOSIO blockchains</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_node_modules_keyv__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">README </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1 align="center"><img src="https://rawgit.com/lukechilds/keyv/master/media/logo.svg" alt="keyv" style="pointer-events: none;" width="250" class="inline"/> <br  />
 <br  />
 </h1>
<blockquote class="doxtable">
<p>Simple key-value storage with support for multiple backends </p>
</blockquote>
<p><a href="https://travis-ci.org/lukechilds/keyv"><img src="https://travis-ci.org/lukechilds/keyv.svg?branch=master" alt="Build Status" style="pointer-events: none;" class="inline"/></a> <a href="https://coveralls.io/github/lukechilds/keyv?branch=master"><img src="https://coveralls.io/repos/github/lukechilds/keyv/badge.svg?branch=master" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/keyv"><img src="https://img.shields.io/npm/dm/keyv.svg" alt="npm" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/keyv"><img src="https://img.shields.io/npm/v/keyv.svg" alt="npm" style="pointer-events: none;" class="inline"/></a></p>
<p>Keyv provides a consistent interface for key-value storage across multiple backends via storage adapters. It supports TTL based expiry, making it suitable as a cache or a persistent key-value store.</p>
<h2><a class="anchor" id="autotoc_md2360"></a>
Features</h2>
<p>There are a few existing modules similar to Keyv, however Keyv is different because it:</p>
<ul>
<li>Isn't bloated</li>
<li>Has a simple Promise based API</li>
<li>Suitable as a TTL based cache or persistent key-value store</li>
<li><a href="#add-cache-support-to-your-module">Easily embeddable</a> inside another module</li>
<li>Works with any storage that implements the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map"><code>Map</code></a> API</li>
<li>Handles all JSON types plus <code>Buffer</code></li>
<li>Supports namespaces</li>
<li>Wide range of <a href="#official-storage-adapters"><b>efficient, well tested</b></a> storage adapters</li>
<li>Connection errors are passed through (db failures won't kill your app)</li>
<li>Supports the current active LTS version of Node.js or higher</li>
</ul>
<h2><a class="anchor" id="autotoc_md2361"></a>
Usage</h2>
<p>Install Keyv.</p>
<div class="fragment"><div class="line">npm install --save keyv</div>
</div><!-- fragment --><p>By default everything is stored in memory, you can optionally also install a storage adapter.</p>
<div class="fragment"><div class="line">npm install --save @keyv/redis</div>
<div class="line">npm install --save @keyv/mongo</div>
<div class="line">npm install --save @keyv/sqlite</div>
<div class="line">npm install --save @keyv/postgres</div>
<div class="line">npm install --save @keyv/mysql</div>
</div><!-- fragment --><p>Create a new Keyv instance, passing your connection string if applicable. Keyv will automatically load the correct storage adapter.</p>
<div class="fragment"><div class="line">const Keyv = require(&#39;keyv&#39;);</div>
<div class="line"> </div>
<div class="line">// One of the following</div>
<div class="line">const keyv = new Keyv();</div>
<div class="line">const keyv = new Keyv(&#39;redis://user:pass@localhost:6379&#39;);</div>
<div class="line">const keyv = new Keyv(&#39;mongodb://user:pass@localhost:27017/dbname&#39;);</div>
<div class="line">const keyv = new Keyv(&#39;sqlite://path/to/database.sqlite&#39;);</div>
<div class="line">const keyv = new Keyv(&#39;postgresql://user:pass@localhost:5432/dbname&#39;);</div>
<div class="line">const keyv = new Keyv(&#39;mysql://user:pass@localhost:3306/dbname&#39;);</div>
<div class="line"> </div>
<div class="line">// Handle DB connection errors</div>
<div class="line">keyv.on(&#39;error&#39;, err =&gt; console.log(&#39;Connection Error&#39;, err));</div>
<div class="line"> </div>
<div class="line">await keyv.set(&#39;foo&#39;, &#39;expires in 1 second&#39;, 1000); // true</div>
<div class="line">await keyv.set(&#39;foo&#39;, &#39;never expires&#39;); // true</div>
<div class="line">await keyv.get(&#39;foo&#39;); // &#39;never expires&#39;</div>
<div class="line">await keyv.delete(&#39;foo&#39;); // true</div>
<div class="line">await keyv.clear(); // undefined</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2362"></a>
Namespaces</h3>
<p>You can namespace your Keyv instance to avoid key collisions and allow you to clear only a certain namespace while using the same database.</p>
<div class="fragment"><div class="line">const users = new Keyv(&#39;redis://user:pass@localhost:6379&#39;, { namespace: &#39;users&#39; });</div>
<div class="line">const cache = new Keyv(&#39;redis://user:pass@localhost:6379&#39;, { namespace: &#39;cache&#39; });</div>
<div class="line"> </div>
<div class="line">await users.set(&#39;foo&#39;, &#39;users&#39;); // true</div>
<div class="line">await cache.set(&#39;foo&#39;, &#39;cache&#39;); // true</div>
<div class="line">await users.get(&#39;foo&#39;); // &#39;users&#39;</div>
<div class="line">await cache.get(&#39;foo&#39;); // &#39;cache&#39;</div>
<div class="line">await users.clear(); // undefined</div>
<div class="line">await users.get(&#39;foo&#39;); // undefined</div>
<div class="line">await cache.get(&#39;foo&#39;); // &#39;cache&#39;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md2363"></a>
Custom Serializers</h3>
<p>Keyv uses <a href="https://github.com/dominictarr/json-buffer"><code>json-buffer</code></a> for data serialization to ensure consistency across different backends.</p>
<p>You can optionally provide your own serialization functions to support extra data types or to serialize to something other than JSON.</p>
<div class="fragment"><div class="line">const keyv = new Keyv({ serialize: JSON.stringify, deserialize: JSON.parse });</div>
</div><!-- fragment --><p><b>Warning:</b> Using custom serializers means you lose any guarantee of data consistency. You should do extensive testing with your serialisation functions and chosen storage engine.</p>
<h2><a class="anchor" id="autotoc_md2364"></a>
Official Storage Adapters</h2>
<p>The official storage adapters are covered by <a href="https://travis-ci.org/lukechilds/keyv/jobs/260418145">over 150 integration tests</a> to guarantee consistent behaviour. They are lightweight, efficient wrappers over the DB clients making use of indexes and native TTLs where available.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Database </th><th class="markdownTableHeadNone">Adapter </th><th class="markdownTableHeadNone">Native TTL </th><th class="markdownTableHeadNone">Status  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Redis </td><td class="markdownTableBodyNone"><a href="https://github.com/lukechilds/keyv-redis">@keyv/redis</a> </td><td class="markdownTableBodyNone">Yes </td><td class="markdownTableBodyNone"><a href="https://travis-ci.org/lukechilds/keyv-redis"><img src="https://travis-ci.org/lukechilds/keyv-redis.svg?branch=master" alt="Build Status" style="pointer-events: none;" class="inline"/></a> <a href="https://coveralls.io/github/lukechilds/keyv-redis?branch=master"><img src="https://coveralls.io/repos/github/lukechilds/keyv-redis/badge.svg?branch=master" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MongoDB </td><td class="markdownTableBodyNone"><a href="https://github.com/lukechilds/keyv-mongo">@keyv/mongo</a> </td><td class="markdownTableBodyNone">Yes </td><td class="markdownTableBodyNone"><a href="https://travis-ci.org/lukechilds/keyv-mongo"><img src="https://travis-ci.org/lukechilds/keyv-mongo.svg?branch=master" alt="Build Status" style="pointer-events: none;" class="inline"/></a> <a href="https://coveralls.io/github/lukechilds/keyv-mongo?branch=master"><img src="https://coveralls.io/repos/github/lukechilds/keyv-mongo/badge.svg?branch=master" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SQLite </td><td class="markdownTableBodyNone"><a href="https://github.com/lukechilds/keyv-sqlite">@keyv/sqlite</a> </td><td class="markdownTableBodyNone">No </td><td class="markdownTableBodyNone"><a href="https://travis-ci.org/lukechilds/keyv-sqlite"><img src="https://travis-ci.org/lukechilds/keyv-sqlite.svg?branch=master" alt="Build Status" style="pointer-events: none;" class="inline"/></a> <a href="https://coveralls.io/github/lukechilds/keyv-sqlite?branch=master"><img src="https://coveralls.io/repos/github/lukechilds/keyv-sqlite/badge.svg?branch=master" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PostgreSQL </td><td class="markdownTableBodyNone"><a href="https://github.com/lukechilds/keyv-postgres">@keyv/postgres</a> </td><td class="markdownTableBodyNone">No </td><td class="markdownTableBodyNone"><a href="https://travis-ci.org/lukechildskeyv-postgreskeyv"><img src="https://travis-ci.org/lukechilds/keyv-postgres.svg?branch=master" alt="Build Status" style="pointer-events: none;" class="inline"/></a> <a href="https://coveralls.io/github/lukechilds/keyv-postgres?branch=master"><img src="https://coveralls.io/repos/github/lukechilds/keyv-postgres/badge.svg?branch=master" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MySQL </td><td class="markdownTableBodyNone"><a href="https://github.com/lukechilds/keyv-mysql">@keyv/mysql</a> </td><td class="markdownTableBodyNone">No </td><td class="markdownTableBodyNone"><a href="https://travis-ci.org/lukechilds/keyv-mysql"><img src="https://travis-ci.org/lukechilds/keyv-mysql.svg?branch=master" alt="Build Status" style="pointer-events: none;" class="inline"/></a> <a href="https://coveralls.io/github/lukechilds/keyv-mysql?branch=master"><img src="https://coveralls.io/repos/github/lukechilds/keyv-mysql/badge.svg?branch=master" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a>  </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md2365"></a>
Third-party Storage Adapters</h2>
<p>You can also use third-party storage adapters or build your own. Keyv will wrap these storage adapters in TTL functionality and handle complex types internally.</p>
<div class="fragment"><div class="line">const Keyv = require(&#39;keyv&#39;);</div>
<div class="line">const myAdapter = require(&#39;./my-storage-adapter&#39;);</div>
<div class="line"> </div>
<div class="line">const keyv = new Keyv({ store: myAdapter });</div>
</div><!-- fragment --><p>Any store that follows the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map"><code>Map</code></a> api will work.</p>
<div class="fragment"><div class="line">new Keyv({ store: new Map() });</div>
</div><!-- fragment --><p>For example, <a href="https://github.com/sindresorhus/quick-lru"><code>quick-lru</code></a> is a completely unrelated module that implements the Map API.</p>
<div class="fragment"><div class="line">const Keyv = require(&#39;keyv&#39;);</div>
<div class="line">const QuickLRU = require(&#39;quick-lru&#39;);</div>
<div class="line"> </div>
<div class="line">const lru = new QuickLRU({ maxSize: 1000 });</div>
<div class="line">const keyv = new Keyv({ store: lru });</div>
</div><!-- fragment --><p>The following are third-party storage adapters compatible with Keyv:</p>
<ul>
<li><a href="https://github.com/sindresorhus/quick-lru">quick-lru</a> - Simple "Least Recently Used" (LRU) cache</li>
<li><a href="https://github.com/zaaack/keyv-file">keyv-file</a> - File system storage adapter for Keyv</li>
<li><a href="https://www.npmjs.com/package/keyv-dynamodb">keyv-dynamodb</a> - DynamoDB storage adapter for Keyv</li>
<li><a href="https://github.com/goto-bus-stop/keyv-firestore">keyv-firestore</a> – Firebase Cloud Firestore adapter for Keyv</li>
<li><a href="https://github.com/pmorgan3/keyv-mssql">keyv-mssql</a> - Microsoft Sql Server adapter for Keyv</li>
<li><a href="https://github.com/jaredwray/keyv-memcache">keyv-memcache</a> - Memcache storage adapter for Keyv</li>
</ul>
<h2><a class="anchor" id="autotoc_md2366"></a>
Add Cache Support to your Module</h2>
<p>Keyv is designed to be easily embedded into other modules to add cache support. The recommended pattern is to expose a <code>cache</code> option in your modules options which is passed through to Keyv. Caching will work in memory by default and users have the option to also install a Keyv storage adapter and pass in a connection string, or any other storage that implements the <code>Map</code> API.</p>
<p>You should also set a namespace for your module so you can safely call <code>.clear()</code> without clearing unrelated app data.</p>
<p>Inside your module:</p>
<div class="fragment"><div class="line">class AwesomeModule {</div>
<div class="line">    constructor(opts) {</div>
<div class="line">        this.cache = new Keyv({</div>
<div class="line">            uri: typeof opts.cache === &#39;string&#39; &amp;&amp; opts.cache,</div>
<div class="line">            store: typeof opts.cache !== &#39;string&#39; &amp;&amp; opts.cache,</div>
<div class="line">            namespace: &#39;awesome-module&#39;</div>
<div class="line">        });</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Now it can be consumed like this:</p>
<div class="fragment"><div class="line">const AwesomeModule = require(&#39;awesome-module&#39;);</div>
<div class="line"> </div>
<div class="line">// Caches stuff in memory by default</div>
<div class="line">const awesomeModule = new AwesomeModule();</div>
<div class="line"> </div>
<div class="line">// After npm install --save keyv-redis</div>
<div class="line">const awesomeModule = new AwesomeModule({ cache: &#39;redis://localhost&#39; });</div>
<div class="line"> </div>
<div class="line">// Some third-party module that implements the Map API</div>
<div class="line">const awesomeModule = new AwesomeModule({ cache: some3rdPartyStore });</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2367"></a>
API</h2>
<h3><a class="anchor" id="autotoc_md2368"></a>
new Keyv([uri], [options])</h3>
<p>Returns a new Keyv instance.</p>
<p>The Keyv instance is also an <code>EventEmitter</code> that will emit an &lsquo;'error&rsquo;` event if the storage adapter connection fails.</p>
<h3><a class="anchor" id="autotoc_md2369"></a>
uri</h3>
<p>Type: <code>String</code><br  />
 Default: <code>undefined</code></p>
<p>The connection string URI.</p>
<p>Merged into the options object as options.uri.</p>
<h3><a class="anchor" id="autotoc_md2370"></a>
options</h3>
<p>Type: <code>Object</code></p>
<p>The options object is also passed through to the storage adapter. Check your storage adapter docs for any extra options.</p>
<h4><a class="anchor" id="autotoc_md2371"></a>
options.namespace</h4>
<p>Type: <code>String</code><br  />
 Default: &lsquo;'keyv&rsquo;`</p>
<p>Namespace for the current instance.</p>
<h4><a class="anchor" id="autotoc_md2372"></a>
options.ttl</h4>
<p>Type: <code>Number</code><br  />
 Default: <code>undefined</code></p>
<p>Default TTL. Can be overridden by specififying a TTL on <code>.set()</code>.</p>
<h4><a class="anchor" id="autotoc_md2373"></a>
options.serialize</h4>
<p>Type: <code>Function</code><br  />
 Default: <code>JSONB.stringify</code></p>
<p>A custom serialization function.</p>
<h4><a class="anchor" id="autotoc_md2374"></a>
options.deserialize</h4>
<p>Type: <code>Function</code><br  />
 Default: <code>JSONB.parse</code></p>
<p>A custom deserialization function.</p>
<h4><a class="anchor" id="autotoc_md2375"></a>
options.store</h4>
<p>Type: <code>Storage adapter instance</code><br  />
 Default: <code>new Map()</code></p>
<p>The storage adapter instance to be used by Keyv.</p>
<h4><a class="anchor" id="autotoc_md2376"></a>
options.adapter</h4>
<p>Type: <code>String</code><br  />
 Default: <code>undefined</code></p>
<p>Specify an adapter to use. e.g &lsquo;'redis&rsquo;<code>or</code>'mongodb'`.</p>
<h3><a class="anchor" id="autotoc_md2377"></a>
Instance</h3>
<p>Keys must always be strings. Values can be of any type.</p>
<h4><a class="anchor" id="autotoc_md2378"></a>
.set(key, value, [ttl])</h4>
<p>Set a value.</p>
<p>By default keys are persistent. You can set an expiry TTL in milliseconds.</p>
<p>Returns a promise which resolves to <code>true</code>.</p>
<h4><a class="anchor" id="autotoc_md2379"></a>
.get(key, [options])</h4>
<p>Returns a promise which resolves to the retrieved value.</p>
<p><a class="anchor" id="autotoc_md2380"></a></p><h5>options.raw</h5>
<p>Type: <code>Boolean</code><br  />
 Default: <code>false</code></p>
<p>If set to true the raw DB object Keyv stores internally will be returned instead of just the value.</p>
<p>This contains the TTL timestamp.</p>
<h4><a class="anchor" id="autotoc_md2381"></a>
.delete(key)</h4>
<p>Deletes an entry.</p>
<p>Returns a promise which resolves to <code>true</code> if the key existed, <code>false</code> if not.</p>
<h4><a class="anchor" id="autotoc_md2382"></a>
.clear()</h4>
<p>Delete all entries in the current namespace.</p>
<p>Returns a promise which is resolved when the entries have been cleared.</p>
<h2><a class="anchor" id="autotoc_md2383"></a>
License</h2>
<p>MIT © Luke Childs </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
