<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EOSDAC: Documentation category style</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EOSDAC
   </div>
   <div id="projectbrief">Open source decentralised DAC platform for EOSIO blockchains</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_node_modules_typescript-logging_docs_latest_categorized.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Documentation category style </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page describes how the latest, new logging mechanism of this library works and can be used.</p>
<ul>
<li><a href="#why">Why</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#formatting-message">Formatting message</a></li>
<li><a href="#custom-logger">Custom logger</a></li>
<li><a href="#api-and-documentation">Api and documentation</a></li>
<li><a href="#browser-developer-extension">Browser developer extension</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md4400"></a>
Why</h1>
<p>Most logging libraries are (loosely) based on (older) existing logging implementations in the way they used to work and are setup. There's nothing wrong with that, and in fact the 'old' way of logging is implemented in a similar fashion by the log4j style logging as well.</p>
<p>However in our projects we felt we needed a different approach to logging, specially now that logging for TypeScript is often for single page applications, built in frameworks like angular, react, ember and so on.</p>
<p>We wanted an easy to use logging mechanism that could build up itself dynamically if needed, and required minimum configuration from a developers perspective by default.</p>
<p>In addition, what we also needed is to be able to easily enable/change logging when the application is already deployed. Next to logging during development, it was also important to be able to trace problems customers encounter in production.</p>
<p>The above is tackled by a different project <a href="https://github.com/mreuvers/typescript-logging-extension">typescript-logging-extension</a> which currently can be used in Chrome, as a developer extension, if the category style of logging is used by the application.</p>
<p>In addition of the extension, logging can be changed on console level as well.</p>
<h1><a class="anchor" id="autotoc_md4401"></a>
Usage</h1>
<p>The example below configures the logging in Config.ts and exports a handful of categories. Each category created can be used directly to log for that category (so, debug, info etc methods are present on it!).</p>
<p>Logging directly using Category is new since version 0.5.0.</p>
<p>In the previous versions you first had to retrieve a logger using: <code>CategoryServiceFactory.getLogger(categoryHere)</code> That still works, but is not necessary anymore.</p>
<p>The module ProductService.ts imports the categories to log to (and the logger as example). The module FinancialService.ts imports the catService category, but it needs an additional child category. It does that by just declaring another category, and can immediately use it.</p>
<p>Config.ts </p><div class="fragment"><div class="line">import {Category,CategoryLogger,CategoryServiceFactory,CategoryConfiguration,LogLevel} from &quot;typescript-logging&quot;;</div>
<div class="line"> </div>
<div class="line">// Optionally change default settings, in this example set default logging to Info.</div>
<div class="line">// Without changing configuration, categories will log to Error.</div>
<div class="line">CategoryServiceFactory.setDefaultConfiguration(new CategoryConfiguration(LogLevel.Info));</div>
<div class="line"> </div>
<div class="line">// Create categories, they will autoregister themselves.</div>
<div class="line">// This creates one root (no parent) category, with two children.</div>
<div class="line">export const catService = new Category(&quot;service&quot;);</div>
<div class="line">export const catCust = new Category(&quot;customer&quot;, catService);</div>
<div class="line">export const catProd = new Category(&quot;product&quot;, catService);</div>
<div class="line"> </div>
<div class="line">// This is not needed anymore since 0.5.0, but effectively does the same for given category.</div>
<div class="line">// It can be retrieved for a category directly, this is mostly for backwards compatibility.</div>
<div class="line">export const logProduct: CategoryLogger = CategoryServiceFactory.getLogger(catProd);</div>
</div><!-- fragment --><p>ProductService.ts </p><div class="fragment"><div class="line">import {catService,catProd,catCust,logProduct} from &quot;./Config&quot;</div>
<div class="line"> </div>
<div class="line">export class ProductService {</div>
<div class="line"> </div>
<div class="line">  createProduct(name: string): Product {</div>
<div class="line">     // Normal log for category: catProd</div>
<div class="line">     catProd.info(&quot;Creating product with name: &quot; + name);</div>
<div class="line"> </div>
<div class="line">     // Lambda log for category: catProd (cheaper, only called when needed)</div>
<div class="line">     catProd.info(() =&gt; &quot;Creating product with name: &quot; + name);</div>
<div class="line"> </div>
<div class="line">     // logProduct does exactly the same as catProd.info(..) would, just here as example.</div>
<div class="line">     logProduct.info(&quot;Creating product with name: &quot; + name);</div>
<div class="line"> </div>
<div class="line">     // Log to multiple categories, logs for catCust as well.</div>
<div class="line">     catProd.info(&quot;Creating product with name: &quot; + name, catCust);</div>
<div class="line"> </div>
<div class="line">     return new Product(name);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>FinancialService.ts </p><div class="fragment"><div class="line">import {catService} from &quot;./Config&quot;</div>
<div class="line"> </div>
<div class="line">// Oh, turns out we need another sub-category. This can be done dynamically later on as well.</div>
<div class="line">const catFin = new Category(&quot;financial&quot;, catService);</div>
<div class="line"> </div>
<div class="line">export class FinancialService {</div>
<div class="line"> </div>
<div class="line">  processMoney(): void {</div>
<div class="line">    catFin.info(&quot;Log to the new category&quot;);</div>
<div class="line"> </div>
<div class="line">    const data = { text: &quot;letters&quot; };</div>
<div class="line"> </div>
<div class="line">    // Note we use LogData to pass in here! Also &#39;data&#39; is just a shortcut for &#39;data: data&#39; here.</div>
<div class="line">    catFin.info({msg: &quot;LogData message&quot;, data}, catFin);</div>
<div class="line"> </div>
<div class="line">    // This custom formats the additional data (ds lambda)</div>
<div class="line">    catFin.info({msg: &quot;LogData message&quot;, data, ds: (value: any) =&gt; &quot;[custom]: &quot; + JSON.stringify(value)});</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><p>Output (we assume we called the methods createProduct("Beer") and processMoney()): </p><div class="fragment"><div class="line">2016-12-22 11:14:26,273 INFO [product] Creating product with name: Beer</div>
<div class="line">2016-12-22 11:14:26,274 INFO [product] Creating product with name: Beer</div>
<div class="line">2016-12-22 11:14:26,275 INFO [product] Creating product with name: Beer</div>
<div class="line">2016-12-22 11:14:26,275 INFO [product, customer] Creating product with name: Beer</div>
<div class="line">2016-12-22 11:14:26,276 INFO [financial] Log to the new category</div>
<div class="line">2016-12-22 11:14:26,277 INFO [financial] LogData message [data]: {&quot;text&quot;:&quot;letters&quot;}</div>
<div class="line">2016-12-22 11:14:26,278 INFO [financial] LogData message [custom]: {&quot;text&quot;:&quot;letters&quot;}</div>
</div><!-- fragment --><p>For LogData interface see: <a class="el" href="md_node_modules_typescript-logging_docs_latest_log4j.html">LogData</a> close to the bottom of the page.</p>
<h1><a class="anchor" id="autotoc_md4402"></a>
Formatting message</h1>
<p>If you do not need a custom logger but need a custom message for the other logger types (non-custom), you can specify a custom formatterLogMessage lambda instead. This allows you to change the log message without the need to implement a custom logger.</p>
<p>The following code gives an example on how to do this (imports have been left out): </p><div class="fragment"><div class="line">const defaultConfig = new CategoryConfiguration(LogLevel.Info, LoggerType.Console);</div>
<div class="line">defaultConfig.formatterLogMessage = (msg: CategoryLogMessage): string =&gt; {</div>
<div class="line">  // This example just shortens the message (will have no time info etc.)</div>
<div class="line">  return msg.getMessage();</div>
<div class="line">};</div>
<div class="line">CategoryServiceFactory.setDefaultConfiguration(defaultConfig);</div>
<div class="line">export const catService = new Category(&quot;service&quot;);</div>
<div class="line"> </div>
<div class="line">// The catService above can be used for logging now and uses the custom formatter.</div>
</div><!-- fragment --><p>The category from the example above will now use the given formatter, and will only log the message without any additional information such as time.</p>
<h1><a class="anchor" id="autotoc_md4403"></a>
Custom logger</h1>
<p>By default logging will go the console. In some cases you may want to use a custom logger which either logs differently or logs elsewhere. The example below shows how to do add a custom logger.</p>
<p>CustomLogger.ts </p><div class="fragment"><div class="line">import {AbstractCategoryLogger,Category,CategoryLogMessage,RuntimeSettings} from &quot;typescript-logging&quot;;</div>
<div class="line"> </div>
<div class="line">export class CustomLogger extends AbstractCategoryLogger {</div>
<div class="line"> </div>
<div class="line">  private messages: string[] = [];</div>
<div class="line"> </div>
<div class="line">  // The first two parameters are required, the 3rd is our parameter</div>
<div class="line">  // where we give this logger an array and log all messages to that array.</div>
<div class="line">  constructor(category: Category, runtimeSettings: RuntimeSettings, messages: string[]) {</div>
<div class="line">    super(category, runtimeSettings);</div>
<div class="line">    this.messages = messages;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  // This is the only thing you really need to implement. In this case</div>
<div class="line">  // we just write the complete message to the array.</div>
<div class="line">  protected doLog(msg: CategoryLogMessage): void {</div>
<div class="line">    // Note: we use createDefaultLogMessage() to spit it out formatted and all</div>
<div class="line">    // however you&#39;re free to print in any way you like, the data is all</div>
<div class="line">    // present on the message.</div>
<div class="line">    this.messages.push(this.createDefaultLogMessage(msg));</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>The code above shows how to create a CustomLogger, the easiest way is to extend AbstractCategoryLogger. If you really want to implement everything yourself you could implement interface CategoryLogger instead (note this is quite some work).</p>
<p>Config.ts </p><div class="fragment"><div class="line">import {Category,CategoryLogger,CategoryLogFormat,CategoryServiceFactory,CategoryConfiguration,LoggerType,LogLevel,RuntimeSettings} from &quot;typescript-logging&quot;;</div>
<div class="line">import {CustomLogger} from &quot;./CustomLogger&quot;</div>
<div class="line"> </div>
<div class="line">export const catService = new Category(&quot;service&quot;);</div>
<div class="line">const messages: string[] = [];</div>
<div class="line"> </div>
<div class="line">// Configure to use our custom logger, note the callback which returns our CustomLogger from above.</div>
<div class="line">const config = new CategoryConfiguration(</div>
<div class="line">   LogLevel.Info, LoggerType.Custom, new CategoryLogFormat(),</div>
<div class="line">  (category: Category, runtimeSettings: RuntimeSettings) =&gt; new CustomLogger(category, runtimeSettings, messages)</div>
<div class="line">);</div>
<div class="line">CategoryServiceFactory.setDefaultConfiguration(config);</div>
<div class="line"> </div>
<div class="line">// The catService can be used for logging now using the custom logger beneath.</div>
</div><!-- fragment --><p>The config above modifies the configuration and makes sure that we use our CustomLogger for logging. If you'd log using the catService, e.g. catService.info("Hello"). The formatted message in this example would end up in the array "messages" from above. Obviously you can do whatever you need to do in the CustomLogger.</p>
<p>That's all there is to it to make a custom logger. :)</p>
<h1><a class="anchor" id="autotoc_md4404"></a>
Api and documentation</h1>
<p>The full typescript API can be found in the downloads part of github as a .zip file. Download and extract the zip and open the relevant index.html, it also contains a copy of this file as html.</p>
<p>You can download both bundles and documentation from here: <a href="https://github.com/mreuvers/typescript-logging/tree/master/downloads/bundle/latest">Documentation</a></p>
<h2><a class="anchor" id="autotoc_md4405"></a>
Changing default configuration</h2>
<p>Can be done through CategoryServiceFactory.setDefaultConfiguration(..). Check the documentation for details, as each class is documented on how to be used.</p>
<h2><a class="anchor" id="autotoc_md4406"></a>
Changing log levels dynamically</h2>
<p>When an app runs, you can use the developer extension , see: <a href="https://github.com/mreuvers/typescript-logging-extension">typescript-logging-extension</a> for details.</p>
<p>You can also use the console control API for this since 0.3. For details see <a class="el" href="md_node_modules_typescript-logging_docs_latest_console_control.html">here</a>.</p>
<h1><a class="anchor" id="autotoc_md4407"></a>
Browser developer extension</h1>
<p>Make sure to visit: <a href="https://github.com/mreuvers/typescript-logging-extension">typescript-logging-extension</a> to get the chrome developer extension, which allows you to dynamically change log levels when the app runs. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
